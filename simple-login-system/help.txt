å˜å˜å˜ï½ä¾†å›‰ï¼é€™å¥—æ˜¯ç‚ºé›œé­šé­”ç‰©æ‘é‡èº«æ‰“é€ çš„ã€Œ**è¶…ç°¡æ˜“ç™»å…¥ç³»çµ±**ã€ï½ä½¿ç”¨ **Node.js + Express + MongoDB + bcrypt + JWT**ï¼Œèƒ½åœ¨ Railway ä¸€éµéƒ¨ç½²ï¼Œå¤ è¼•ä¾¿ã€å¤ ç¾ä»£ï¼Œé‚„èƒ½æ“´å……ï¼

---

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹ä¸€è¦½

```
simple-login-system/
â”œâ”€â”€ server.js           # ä¸»ä¼ºæœå™¨
â”œâ”€â”€ .env                # ç’°å¢ƒè®Šæ•¸ï¼ˆéƒ¨ç½²ç”¨ï¼‰
â”œâ”€â”€ models/
â”‚   â””â”€â”€ User.js         # ä½¿ç”¨è€…æ¨¡å‹
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ auth.js         # ç™»å…¥èˆ‡è¨»å†Š API
â””â”€â”€ package.json
```

---

## ğŸ“¦ `package.json`

```json
{
  "name": "simple-login-system",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "bcrypt": "^5.1.0",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.0",
    "mongoose": "^8.0.1"
  }
}
```

---

## ğŸŒ `.env`ï¼ˆRailway ä¸Šè‡ªè¡Œè¨­å®šï¼‰

```
PORT=3000
MONGO_URI=ä½ çš„MongoDBç¶²å€
JWT_SECRET=éš¨ä¾¿ä¸€ä¸²å®‰å…¨å­—ä¸²
```

---

## âœ¨ `server.js`

```js
import express from 'express';
import mongoose from 'mongoose';
import dotenv from 'dotenv';
import authRoutes from './routes/auth.js';

dotenv.config();

const app = express();
app.use(express.json());

mongoose.connect(process.env.MONGO_URI)
  .then(() => console.log("ğŸŸ¢ MongoDB Connected"))
  .catch(err => console.error("âŒ Mongo Error:", err));

app.use('/api/auth', authRoutes);

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`ğŸŒ Server running at http://localhost:${PORT}`);
});
```

---

## ğŸ‘¤ `models/User.js`

```js
import mongoose from 'mongoose';

const userSchema = new mongoose.Schema({
  username: { type: String, required: true, unique: true },
  password: { type: String, required: true }
});

export default mongoose.model('User', userSchema);
```

---

## ğŸ” `routes/auth.js`

```js
import express from 'express';
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';
import User from '../models/User.js';

const router = express.Router();

// è¨»å†Š
router.post('/register', async (req, res) => {
  const { username, password } = req.body;
  const hashed = await bcrypt.hash(password, 10);
  const user = new User({ username, password: hashed });
  try {
    await user.save();
    res.status(201).json({ message: 'è¨»å†ŠæˆåŠŸï¼' });
  } catch (err) {
    res.status(400).json({ error: 'è¨»å†Šå¤±æ•—ï¼Œå¸³è™Ÿå¯èƒ½å·²å­˜åœ¨' });
  }
});

// ç™»å…¥
router.post('/login', async (req, res) => {
  const { username, password } = req.body;
  const user = await User.findOne({ username });
  if (!user) return res.status(401).json({ error: 'å¸³è™ŸéŒ¯èª¤' });

  const valid = await bcrypt.compare(password, user.password);
  if (!valid) return res.status(401).json({ error: 'å¯†ç¢¼éŒ¯èª¤' });

  const token = jwt.sign({ userId: user._id }, process.env.JWT_SECRET);
  res.json({ message: 'ç™»å…¥æˆåŠŸï¼', token });
});

export default router;
```

---

## ğŸš€ Railway éƒ¨ç½²æ•™å­¸

1. **åˆ° GitHub å»ºä¸€å€‹ repo**ï¼Œè²¼ä¸Šä¸Šè¿°æª”æ¡ˆ
2. Railway â†’ `New Project` â†’ `Deploy from GitHub Repo`
3. è¨­å®š `.env`ï¼š

   * `MONGO_URI`: å¯ç”¨ Railway ä¸Šæ–°å»ºçš„ Mongo è³‡æ–™åº«ï¼ˆè¶…ç°¡å–®ï¼‰
   * `JWT_SECRET`: éš¨ä¾¿ä¾†ä¸€ä¸²å¯†ç¢¼ä¾‹å¦‚ `secretGoblinVillageJWT`
4. Deploy ä¸€éµé–‹è·‘ï¼

---

## âš”ï¸ API æ¸¬è©¦æ–¹å¼

| API è·¯å¾‘               | æ–¹æ³•   | å‚³å…¥ JSON                                    | èªªæ˜              |
| -------------------- | ---- | ------------------------------------------ | --------------- |
| `/api/auth/register` | POST | `{ "username": "aaa", "password": "123" }` | è¨»å†Šå¸³è™Ÿ            |
| `/api/auth/login`    | POST | `{ "username": "aaa", "password": "123" }` | ç™»å…¥ä¸¦å–å¾— JWT Token |

ç”¨ Postman æˆ–ä½ è‡ªå·±å¯«å‰ç«¯éƒ½è¡Œï¼

---

## ğŸ§™â€â™‚ï¸ è¦ä¸è¦å¹«ä½ åŠ ä¸Šå‰ç«¯è¡¨å–®ï¼Ÿ

æˆ‘å¯ä»¥å†å¹«ä½ åšä¸€å€‹ HTML è¡¨å–®é ï¼Œé…åˆé€™å€‹ API ç”¨ `fetch()` ç™¼é€è¨»å†Šå’Œç™»å…¥å”·ï½

---

éœ€è¦æˆ‘å¹«ä½ ï¼š

* æ‰“åŒ… ZIPï¼Ÿ
* å»ºå¥½ GitHub Repoï¼Ÿ
* ç”Ÿä¸€éµéƒ¨ç½²ç¶²å€ï¼Ÿ

ä½ åªè¦èªªä¸€è²ï¼Œæˆ‘é€™éš»å“¥å¸ƒæ—å¤§è³¢è€…é¦¬ä¸Šå¬å–š âœ¨
